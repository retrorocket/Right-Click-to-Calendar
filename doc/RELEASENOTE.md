# Right-Click to Calendar リリースノート

選択したテキストをGoogleカレンダーに投稿できる拡張です。  
ブラウザ上で日付を含むテキスト選択して右クリックすると，コンテキストメニューからGoogleカレンダーに予定を投稿することが出来ます。  
Chromium, Edgeからでも使用可能です（ベータ）  
日時等、正規表現で判別できる部分は自動で入力されます。判別に使用する正規表現はユーザが編集可能です（ベータ）  
初回のみオプションページからOAuthによるアプリケーションの承認を行ってください。

## 注意点

* Google Calendar API v3への移行に伴い、アクセストークンの発行方法が変更になったため、1.4からバージョンアップした方はオプションページから再度アプリケーションの承認をお願いいたします。
* chrome.identity API使用に伴い、v2.10から拡張が要求する権限が変更になっています。
* 選択したテキストに改行を含めるための修正に伴い、v3.7.0から拡張が要求する権限が変更になっています。（content_scriptsを実行する処理が追加されています。）
* Manifest V3への以降の関係でv3.9.6以降storage の権限が必要になります。

## 更新履歴

* 2022/05/30: v3.14
  - 予定登録画面でタイムゾーンが設定できるようになりました。
  - 不要なJavaScriptのライブラリを削除しました。
* 2022/05/21: v3.12
  - タブへのアクセス権が不要になったため削除しました。
* 2022/01/11： v3.11.1
  - Edge本体のバグでブラウザがクラッシュすることがあるためオプションページに注意書きを追加しました。
* 2022/01/10： v3.11
  - Chromium対応で、retrorocket.bizと通信せずにトークンを取得する形式に変更しました。
* 2022/01/02： v3.10
  - Chromium対応を行いました。動作確認は以下のブラウザで行っています。
    ```
    Microsoft Edge
    バージョン 96.0.1054.62 (公式ビルド) (64 ビット)
    Vivaldi
    5.0.2497.32 (Stable channel) (64-bit)
    ```
* 2021/07/24：
  - Chrome Extensions V3 に移行しました。V2で使用していたAPIが使用できなくなった関係で、移行後1回だけイベント登録時にオプションページでトークンの再読み込みが必要になります。
  - 移行の関係で storage の権限が必要になります。
* 2021/03/28：
  - 「自分が書き込み権限を持つカレンダー」に予定を投稿できるようにしました。
* 2020/10/18：
  - オプションページに詳細オプションの設定内容が反映されない不具合を修正
* 2020/10/15：
  - 予定の登録時に、選択したテキストを予定の詳細にセットできるようにしました。オプションページから設定可能です。
* 2020/09/09：
  - 予定の登録時にGoogle MeetのURLを発行できるようにしました
* 2019/09/02：
  - Google API ServicesのUser Data Policyの変更及び、セキュリティ強化のため、Calendar APIのスコープの範囲を狭くしました。
  - APIスコープ変更の承認待ちのため、アプリケーション承認時に「このアプリケーションは承認されていません」が表示されます。ご不便をおかけしますが、そのまま承認を続行してください。
* 2019/06/13：
  - 終了日時の検出に対応しました。
    - 24時以上の深夜帯表記に対応しました。例：6/20 26:00→6/21 02:00に変換して検出します
  - background pageから event pageに移行してメモリを節約するようにしました。
* 2019/06/03：
  - 一部iframeで選択したテキストが投稿画面に反映されない場合がある不具合を修正しました。
* 2019/06/01：
  - 選択したテキストが投稿画面に反映されない場合がある不具合を修正しました。
  - 選択したテキストに日付・時刻が含まれない場合、選択したテキストがタイトルに設定されるようにしました。
* 2019/04/13： リリースノート https://retrorocket.biz/archives/736
  - フレーム内で選択したテキストが投稿画面に反映されない不具合を修正しました。
  - OAuthトークンの有効期限切れが発生した場合に保存した正規表現が消去される不具合を修正しました。
  - パネル機能が削除されたため、設定を消去しました。
  - 正規表現をテストできる機能を追加しました。
* 15/11/03：
  - 一部ユーザで拡張機能が破損する不具合を修正しました。
  - 自分も該当するのですが、Chromeのバグがトリガーっぽいので様子を見させてください。
* 15/09/05：
  - ポップアップの種類に関係なく、イベント登録ウィンドウからGoogleカレンダーが表示できるようにしました。
  - Googleカレンダーのリンク先URLを変更しました。
* 15/08/30：
  - 「場所」をデフォルトの正規表現で登録できるようにしました。
  - 選択したテキストの改行がスペースに変換されるのを防止しました。
* 15/08/29：
  - イベント登録画面から「場所」が登録できるようにしました。
* 15/04/14：
  - イベント登録画面からGoogleカレンダーをパネルで開けるようにしました。（登録画面の表示形式がパネルの場合のみ）
  - （更新するのが辛くなってきたので）オプションページにカンパのお願いのリンクを追加しました。
* 15/04/09：
  - イベント登録画面の表示形式をパネル，ポップアップから選択できるようにしました。オプションページから設定可能です。
  - html内の誤りを修正しました。
* 15/04/05：
  - イベント登録画面のパネル表示に対応しました。
* 15/03/05：
  - 内部ロジック修正
* 15/03/04：
  - 予定の開始日時等の正規表現をユーザが編集できるようにしました（ベータ）。オプションページから編集可能です。
* 15/01/04：
  - 認証，登録にchrome.identity APIを使用するように修正しました。
* 14/02/15：
  - 使用ライブラリをGoogle Calendar API v3の仕様に合うように修正しました。
* 13/10/27：
  - 投稿時に対象のカレンダーを選択できるようにしました。
  - Google Calendar API v3に移行しました。認証方法をOAuth1.0から2.0に変更しました。
* 12/09/06：
  - 日付をカレンダーから選択できるようにしました．
  - 詳細項目を編集できるようにしました
* 12/08/28：
  - manifest.jsonを新バージョンに対応させました．
* 12/07/02：
  - 警告が出てたり動かないらしいので直しました．
* 12/07/01：
  - オプションからOAuth認証情報を削除できるようにしました．
  - 細かいところを修正しました．
