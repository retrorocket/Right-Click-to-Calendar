# Right-Click to Calendar リリースノート

選択したテキストを Google カレンダーに投稿できる Chrome 拡張です。  
ブラウザ上で日付を含むテキスト選択して右クリックすると、コンテキストメニューから Google カレンダーに予定を投稿することが出来ます。  
Chromium, Edge からでも使用可能です。（ベータ機能）  
日時等、正規表現で判別できる部分は自動で入力されます。判別に使用する正規表現はユーザが編集可能です。（ベータ機能）  
初回のみオプションページから OAuth によるアプリケーションの承認を行ってください。

## 注意点

この拡張ではユーザーが選択したテキストを読み取る目的で、Web ページ上で[Content scripts](https://developer.chrome.com/docs/extensions/mv3/content_scripts/)を実行します。

必要な権限は次のとおりです：

- [contextMenus](https://developer.chrome.com/docs/extensions/reference/contextMenus/)
  - 右クリックメニューからカレンダーに登録を行うために使用しています
- [identity](https://developer.chrome.com/docs/extensions/reference/identity/)
  - Google Calendar API を使用するために使用しています
- [storage](https://developer.chrome.com/docs/extensions/reference/storage/)
  - 選択したテキストをイベント登録画面に引き渡す際、一時的に保存が必要となるため使用しています

## 更新履歴

### 2023/08/29: v3.52

- v3.51 に含まれる軽微な問題の修正

### 2023/08/28: v3.51

- 軽微な問題の修正

### 2023/03/10: v3.50

- 英語表記の日付（例： `March 10, 2023`）を選択した際に、数字に変換して予定登録画面に反映されるようにしました。
  - ただし `20,november` のように日付表記として正しくないものは認識しません。

### 2023/02/22: v3.40, v3.41, v3.42

- Chromium 向けアップデート：トークンの取得方法を変更

### 2023/02/20: v3.32

- 特定の条件下で投稿対象のカレンダーがセレクトボックスにセットできない不具合を修正

### 2023/02/15: v3.31

- Chromium 向けアップデート：軽微なバグの修正

### 2023/02/14: v3.30

- Chromium 向けアップデート：トークンの有効期限切れ毎に Google にログインが必要になるのを改善しました。
  - Google にログイン済みの場合、アカウントを選択して承認用ウィンドウを閉じるだけでトークンが取得できるはずです。

### 2023/02/11: v3.21

- Chromium 用の OAuth 用エンドポイントの URL を修正しました。内部的な変更なため、アプリの動作に変更はありません。

### 2023/02/03: v3.20

- バグを修正しました。 #63 #68
- 使用している JavaScript のライブラリを更新しました。

### 2022/05/30: v3.14

- 予定登録画面でタイムゾーンが設定できるようになりました。
- 不要な JavaScript のライブラリを削除しました。

### 2022/05/21: v3.12

- タブへのアクセス権が不要になったため削除しました。

### 2022/01/11： v3.11.1

- Edge 本体のバグでブラウザがクラッシュすることがあるためオプションページに注意書きを追加しました。

### 2022/01/10： v3.11

- Chromium 対応で、retrorocket.biz と通信せずにトークンを取得する形式に変更しました。

### 2022/01/02： v3.10

- Chromium 対応を行いました。動作確認は以下のブラウザで行っています。

  ```
  Microsoft Edge
  バージョン 96.0.1054.62 (公式ビルド) (64 ビット)
  Vivaldi
  5.0.2497.32 (Stable channel) (64-bit)
  ```

### 2021/07/24：

- Chrome Extensions V3 に移行しました。V2 で使用していた API が使用できなくなった関係で、移行後 1 回だけイベント登録時にオプションページでトークンの再読み込みが必要になります。
- 移行の関係で storage の権限が必要になります。

### 2021/03/28：

- 「自分が書き込み権限を持つカレンダー」に予定を投稿できるようにしました。

### 2020/10/18：

- オプションページに詳細オプションの設定内容が反映されない不具合を修正

### 2020/10/15：

- 予定の登録時に、選択したテキストを予定の詳細にセットできるようにしました。オプションページから設定可能です。

### 2020/09/09：

- 予定の登録時に Google Meet の URL を発行できるようにしました

### 2019/09/02：

- Google API Services の User Data Policy の変更及び、セキュリティ強化のため、Calendar API のスコープの範囲を狭くしました。
- API スコープ変更の承認待ちのため、アプリケーション承認時に「このアプリケーションは承認されていません」が表示されます。ご不便をおかけしますが、そのまま承認を続行してください。

### 2019/06/13：

- 終了日時の検出に対応しました。
  - 24 時以上の深夜帯表記に対応しました。例：6/20 26:00→6/21 02:00 に変換して検出します
- background page から event page に移行してメモリを節約するようにしました。

### 2019/06/03：

- 一部 iframe で選択したテキストが投稿画面に反映されない場合がある不具合を修正しました。

### 2019/06/01：

- 選択したテキストが投稿画面に反映されない場合がある不具合を修正しました。
- 選択したテキストに日付・時刻が含まれない場合、選択したテキストがタイトルに設定されるようにしました。

### 2019/04/13： リリースノート <https://retrorocket.biz/archives/736>

- フレーム内で選択したテキストが投稿画面に反映されない不具合を修正しました。
- OAuth トークンの有効期限切れが発生した場合に保存した正規表現が消去される不具合を修正しました。
- パネル機能が削除されたため、設定を消去しました。
- 正規表現をテストできる機能を追加しました。

### 2015/11/03：

- 一部ユーザで拡張機能が破損する不具合を修正しました。
- 自分も該当するのですが、Chrome のバグがトリガーっぽいので様子を見させてください。

### 2015/09/05：

- ポップアップの種類に関係なく、イベント登録ウィンドウから Google カレンダーが表示できるようにしました。
- Google カレンダーのリンク先 URL を変更しました。

### 2015/08/30：

- 「場所」をデフォルトの正規表現で登録できるようにしました。
- 選択したテキストの改行がスペースに変換されるのを防止しました。

### 2015/08/29：

- イベント登録画面から「場所」が登録できるようにしました。

### 2015/04/14：

- イベント登録画面から Google カレンダーをパネルで開けるようにしました。（登録画面の表示形式がパネルの場合のみ）
- （更新するのが辛くなってきたので）オプションページにカンパのお願いのリンクを追加しました。

### 2015/04/09：

- イベント登録画面の表示形式をパネル，ポップアップから選択できるようにしました。オプションページから設定可能です。
- html 内の誤りを修正しました。

### 2015/04/05：

- イベント登録画面のパネル表示に対応しました。

### 2015/03/05：

- 内部ロジック修正

### 2015/03/04：

- 予定の開始日時等の正規表現をユーザが編集できるようにしました（ベータ）。オプションページから編集可能です。

### 2015/01/04：

- 認証，登録に chrome.identity API を使用するように修正しました。

### 2014/02/15：

- 使用ライブラリを Google Calendar API v3 の仕様に合うように修正しました。

### 2013/10/27：

- 投稿時に対象のカレンダーを選択できるようにしました。
- Google Calendar API v3 に移行しました。認証方法を OAuth1.0 から 2.0 に変更しました。

### 2012/09/06：

- 日付をカレンダーから選択できるようにしました．
- 詳細項目を編集できるようにしました

### 2012/08/28：

- manifest.json を新バージョンに対応させました．

### 2012/07/02：

- 警告が出てたり動かないらしいので直しました．

### 2012/07/01：

- オプションから OAuth 認証情報を削除できるようにしました．
- 細かいところを修正しました．
